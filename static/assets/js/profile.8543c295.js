(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["profile"],{5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,s){var a=s("1d80"),r=s("5899"),i="["+r+"]",n=RegExp("^"+i+i+"*"),o=RegExp(i+i+"*$"),d=function(e){return function(t){var s=String(a(t));return 1&e&&(s=s.replace(n,"")),2&e&&(s=s.replace(o,"")),s}};e.exports={start:d(1),end:d(2),trim:d(3)}},7156:function(e,t,s){var a=s("861d"),r=s("d2bb");e.exports=function(e,t,s){var i,n;return r&&"function"==typeof(i=t.constructor)&&i!==s&&a(n=i.prototype)&&n!==s.prototype&&r(e,n),e}},a15b:function(e,t,s){"use strict";var a=s("23e7"),r=s("44ad"),i=s("fc6a"),n=s("a640"),o=[].join,d=r!=Object,l=n("join",",");a({target:"Array",proto:!0,forced:d||!l},{join:function(e){return o.call(i(this),void 0===e?",":e)}})},a9e3:function(e,t,s){"use strict";var a=s("83ab"),r=s("da84"),i=s("94ca"),n=s("6eeb"),o=s("5135"),d=s("c6b6"),l=s("7156"),m=s("c04e"),c=s("d039"),u=s("7c73"),f=s("241c").f,p=s("06cf").f,h=s("9bf2").f,v=s("58a8").trim,_="Number",g=r[_],b=g.prototype,w=d(u(b))==_,y=function(e){var t,s,a,r,i,n,o,d,l=m(e,!1);if("string"==typeof l&&l.length>2)if(l=v(l),t=l.charCodeAt(0),43===t||45===t){if(s=l.charCodeAt(2),88===s||120===s)return NaN}else if(48===t){switch(l.charCodeAt(1)){case 66:case 98:a=2,r=49;break;case 79:case 111:a=8,r=55;break;default:return+l}for(i=l.slice(2),n=i.length,o=0;o<n;o++)if(d=i.charCodeAt(o),d<48||d>r)return NaN;return parseInt(i,a)}return+l};if(i(_,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var C,I=function(e){var t=arguments.length<1?0:e,s=this;return s instanceof I&&(w?c((function(){b.valueOf.call(s)})):d(s)!=_)?l(new g(y(t)),s,I):y(t)},$=a?f(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),N=0;$.length>N;N++)o(g,C=$[N])&&!o(I,C)&&h(I,C,p(g,C));I.prototype=b,b.constructor=I,n(r,_,I)}},b3b1:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("vue-form",{staticClass:"md-layout",attrs:{state:e.formstate},on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[s("md-card",{},[s("md-card-header",[s("div",{staticClass:"md-display-1"},[e._v("Profile")])]),s("md-card-content",[e.error.non_field_errors?s("div",{staticClass:"md-body-1",staticStyle:{color:"red"}},[e._v(e._s(e.error.non_field_errors.join(", ")))]):e._e(),s("div",{staticClass:"md-layout md-gutter"},[s("div",{staticClass:"md-layout md-layout-item md-size-50 md-small-size-100"},[s("div",{staticClass:"md-layout-item md-size-90 md-alignment-center-center",staticStyle:{height:"80%"}},[s("img",{attrs:{src:e.form.profile_pic,id:"preview-image"}}),s("md-field",[s("label",[e._v("Only images")]),s("md-file",{attrs:{accept:"image/*"},on:{change:e.onFileChange},model:{value:e.single,callback:function(t){e.single=t},expression:"single"}})],1)],1)]),s("div",{staticClass:"md-layout-item md-size-50 md-small-size-100"},[e.error.username?s("div",{staticClass:"md-body-1",staticStyle:{color:"red"}},[e._v(e._s(e.error.username.join(", ")))]):e._e(),s("validate",{class:e.fieldClassName(e.formstate.username),attrs:{tag:"md-field"}},[s("label",{attrs:{for:"first-name"}},[e._v("User Name ")]),s("md-input",{attrs:{name:"user-name",id:"user-name",autocomplete:"off",disabled:!0},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}}),s("field-messages",{staticClass:"md-error",staticStyle:{opacity:"1.0"},attrs:{show:"$touched || $submitted"}},[s("div",{attrs:{slot:"required"},slot:"required"},[e._v("The user nanme is required")]),s("div",{attrs:{slot:"maxlength"},slot:"maxlength"},[e._v("Invalid user name")])])],1),s("div",{staticClass:"md-layout md-gutter"},[s("div",{staticClass:"md-layout-item md-small-size-100"},[e.error.first_name?s("div",{staticClass:"md-body-1",staticStyle:{color:"red"}},[e._v(e._s(e.error.first_name.join(", ")))]):e._e(),s("validate",{class:e.fieldClassName(e.formstate.first_name),attrs:{tag:"md-field",custom:{maxInputLength:e.maxInputLength,minInputLength:e.minInputLength}}},[s("label",{attrs:{for:"first-name"}},[e._v("First Name ")]),s("md-input",{attrs:{name:"first-name",id:"first_name",autocomplete:"off",disabled:e.sending,required:""},model:{value:e.form.first_name,callback:function(t){e.$set(e.form,"first_name",t)},expression:"form.first_name"}}),s("field-messages",{staticClass:"md-error",staticStyle:{opacity:"1.0"},attrs:{show:"$touched || $submitted"}},[s("div",{attrs:{slot:"required"},slot:"required"},[e._v("The first name is required")]),s("div",{attrs:{slot:"maxlength"},slot:"maxlength"},[e._v("Invalid first name")]),s("div",{attrs:{slot:"maxInputLength"},slot:"maxInputLength"},[e._v("Invalid first name, maximum length reached")]),s("div",{attrs:{slot:"minInputLength"},slot:"minInputLength"},[e._v("Invalid first name, minimum of at least 3 character")])])],1)],1),s("div",{staticClass:"md-layout-item md-small-size-100"},[e.error.last_name?s("div",{staticClass:"md-body-1",staticStyle:{color:"red"}},[e._v(e._s(e.error.last_name.join(", ")))]):e._e(),s("validate",{class:e.fieldClassName(e.formstate.last_name),attrs:{tag:"md-field",custom:{maxInputLength:e.maxInputLength,minInputLength:e.minInputLength}}},[s("label",{attrs:{for:"last-name"}},[e._v("Last Name ")]),s("md-input",{attrs:{name:"last-name",id:"last_name",autocomplete:"off",disabled:e.sending,required:""},model:{value:e.form.last_name,callback:function(t){e.$set(e.form,"last_name",t)},expression:"form.last_name"}}),s("field-messages",{staticClass:"md-error",staticStyle:{opacity:"1.0"},attrs:{show:"$touched || $submitted"}},[s("div",{attrs:{slot:"required"},slot:"required"},[e._v("The first name is required")]),s("div",{attrs:{slot:"maxInputLength"},slot:"maxInputLength"},[e._v("Invalid last name, maximum length reached")]),s("div",{attrs:{slot:"minInputLength"},slot:"minInputLength"},[e._v("Invalid last name, minimum of at least 3 character")])])],1)],1)]),s("div",{staticClass:"md-layout md-gutter"},[s("div",{staticClass:"md-layout-item md-small-size-100"},[e.error.email?s("div",{staticClass:"md-body-1",staticStyle:{color:"red"}},[e._v(e._s(e.error.email.join(", ")))]):e._e(),s("validate",{class:e.fieldClassName(e.formstate.email),attrs:{tag:"md-field"}},[s("label",{attrs:{for:"email"}},[e._v("Email")]),s("md-input",{attrs:{type:"email",name:"email",id:"email",autocomplete:"off",disabled:!0},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),s("field-messages",{staticClass:"md-error",staticStyle:{opacity:"1.0"},attrs:{show:"$touched || $submitted"}},[s("div",{attrs:{slot:"required"},slot:"required"},[e._v("The email is required")]),s("div",{attrs:{slot:"email"},slot:"email"},[e._v("Invalid email address")])])],1)],1),s("div",{staticClass:"md-layout-item md-small-size-100"},[e.error.phone_number?s("div",{staticClass:"md-body-1",staticStyle:{color:"red"}},[e._v(e._s(e.error.phone_number.join(", ")))]):e._e(),s("validate",{class:e.fieldClassName(e.formstate.phone_number),attrs:{tag:"md-field",custom:{validatephoneNo:e.validatephoneNo}}},[s("label",{attrs:{for:"phone-number"}},[e._v("Phone Number")]),s("md-input",{attrs:{type:"text",name:"phone_number",id:"phone-number",autocomplete:"off",disabled:e.sending},model:{value:e.form.phone_number,callback:function(t){e.$set(e.form,"phone_number",t)},expression:"form.phone_number"}}),s("field-messages",{staticClass:"md-error",staticStyle:{opacity:"1.0"},attrs:{show:"$touched || $submitted"}},[s("div",{attrs:{slot:"validatephoneNo"},slot:"validatephoneNo"},[e._v("Invalid phone number")])])],1)],1)]),e.error.date_of_birth?s("div",{staticClass:"md-body-1",staticStyle:{color:"red"}},[e._v(e._s(e.error.date_of_birth.join(", ")))]):e._e(),s("validate",{class:e.fieldClassName(e.formstate.date_of_birth),attrs:{tag:"md-field"}},[s("md-datepicker",{attrs:{name:"birth",id:"birth"},model:{value:e.form.date_of_birth,callback:function(t){e.$set(e.form,"date_of_birth",t)},expression:"form.date_of_birth"}},[s("label",{attrs:{for:"select-birth-date"}},[e._v("Date of birth")])]),s("field-messages",{staticClass:"md-error",staticStyle:{opacity:"1.0"},attrs:{show:"$touched || $submitted"}})],1),e.error.gender?s("div",{staticClass:"md-body-1",staticStyle:{color:"red"}},[e._v(e._s(e.error.gender.join(", ")))]):e._e(),s("validate",{class:e.fieldClassName(e.formstate.gender),attrs:{tag:"md-field"}},[s("label",{attrs:{for:"gender"}},[e._v("Gender")]),s("md-select",{attrs:{name:"gender",id:"gender","md-dense":"",disabled:e.sending},model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}},[s("md-option"),s("md-option",{attrs:{value:"M"}},[e._v("Male")]),s("md-option",{attrs:{value:"F"}},[e._v("Female")])],1),s("field-messages",{staticClass:"md-error",staticStyle:{opacity:"1.0"},attrs:{show:"$touched || $submitted"}})],1)],1)])]),e.sending?s("md-progress-bar",{attrs:{"md-mode":"indeterminate"}}):e._e(),s("md-card-actions",[s("md-button",{staticClass:"md-accent md-raised md-dense",on:{click:e.openChangePassword}},[e._v("Change password")]),s("md-button",{staticClass:"md-accent md-raised md-dense",attrs:{type:"submit",disabled:e.sending}},[e._v("Save")])],1)],1),s("md-snackbar",{attrs:{"md-active":e.userSaved},on:{"update:mdActive":function(t){e.userSaved=t},"update:md-active":function(t){e.userSaved=t}}},[e._v("saved with success!")])],1)],1)},r=[],i=(s("4160"),s("a15b"),s("a9e3"),s("b64b"),s("159b"),s("5530")),n=s("2f62"),o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("md-snackbar",{attrs:{"md-active":e.showLoading},on:{"update:mdActive":function(t){e.showLoading=t},"update:md-active":function(t){e.showLoading=t}}},[e._v(" "+e._s(e.status)+" ")]),s("md-modal-dialog",{attrs:{"md-click-outside-to-close":!1,"md-fullscreen":!1}},[s("vue-form",{attrs:{state:e.formstate},on:{submit:function(t){return t.preventDefault(),function(){e.formstate.$invalid&&e.change_password()}()}}},[s("md-toolbar",{staticClass:"md-accent"},[s("span",{staticClass:"md-title"},[e._v("Change password")])]),s("md-dialog-content",[s("div",{staticClass:"md-title"},[e._v(e._s(e.message))]),s("div",{staticClass:"md-layout md-gutter"},[s("div",{staticClass:"md-layout-item md-small-size-100"},[s("validate",{class:e.fieldClassName(e.formstate.new_password1),attrs:{tag:"md-field",custom:{validatePassword:e.validatePassword}}},[s("label",{attrs:{for:"enter-password"}},[e._v("Password")]),s("md-input",{attrs:{type:"password",name:"new_password1",id:"new_password1",autocomplete:"new-password",disabled:e.sending,required:""},model:{value:e.password.new_password1,callback:function(t){e.$set(e.password,"new_password1",t)},expression:"password.new_password1"}}),s("field-messages",{staticClass:"md-error",staticStyle:{opacity:"1.0"},attrs:{show:"$touched || $submitted"}},[s("div",{attrs:{slot:"required"},slot:"required"},[e._v("The password is required")]),s("div",{attrs:{slot:"validatePassword"},slot:"validatePassword"},[e._v("Password should be aleast 8 characters")])])],1)],1),s("div",{staticClass:"md-layout-item md-small-size-100"},[s("validate",{class:e.fieldClassName(e.formstate.new_password2),attrs:{tag:"md-field",custom:{matchPassword:e.matchPassword}}},[s("label",{attrs:{for:"re-enter-password"}},[e._v("Re-enter Password")]),s("md-input",{attrs:{type:"password",name:"new_password2",id:"new_password2",autocomplete:"new-password",disabled:e.sending,required:""},model:{value:e.password.new_password2,callback:function(t){e.$set(e.password,"new_password2",t)},expression:"password.new_password2"}}),s("field-messages",{staticClass:"md-error",staticStyle:{opacity:"1.0"},attrs:{show:"$touched || $submitted"}},[s("div",{attrs:{slot:"required"},slot:"required"},[e._v("please re-enter password")]),s("div",{attrs:{slot:"matchPassword"},slot:"matchPassword"},[e._v("password does not match")])])],1)],1)])]),s("md-dialog-actions",[s("md-button",{staticClass:"md-accent md-raised md-dense",attrs:{type:"submit",disabled:e.sending}},[e._v("Ok")]),s("md-button",{staticClass:"md-accent md-raised md-dense",on:{click:function(t){return e.$modal.cancel()}}},[e._v("Cancel")])],1)],1)],1)],1)},d=[],l={name:"uploadDialog",data:function(){return{showLoading:!1,status:"loading ...",message:"",password:{new_password1:"",new_password2:""},formstate:{},passLen:8}},methods:{validatePassword:function(e){return e.length>=this.passLen},matchPassword:function(e){return e===this.password.new_password1},fieldClassName:function(e){return e?(e.$touched||e.$submitted)&&e.$valid?"has-success":(e.$touched||e.$submitted)&&e.$invalid?"has-danger":void 0:""},change_password:function(){var e=this;this.status="",this.message="",this.sending=!0;var t=this.password;this.$http({url:"/rest-auth/password/change/ ",method:"POST",data:t}).then((function(t){e.message="Password changed successfully",e.status="Password changed successfully",setTimeout((function(){return e.$modal.submit(t.data)}),1500)})).catch((function(t){e.sending=!1,e.showLoading=!0,e.message=t.response.data.details.join(", "),e.status=t.response.data.details.join(", ")}))}}},m=l,c=s("2877"),u=Object(c["a"])(m,o,d,!1,null,null,null),f=u.exports,p={data:function(){return{pageData:{pageTitle:"Profile"},formstate:{},form:{username:"",first_name:"",last_name:"",email:"",phone_number:"",date_of_birth:"",gender:"",profile_pic:""},error:{},userSaved:!1,fileObject:"",sending:!1,lastUser:null,maxInputLen:100,minInputLen:3,passLen:8,profileMessage:""}},methods:{clearForm:function(){this.form.username="",this.form.first_name="",this.form.last_name="",this.form.email="",this.form.phone_number="",this.form.gender="",this.form.date_of_birth=""},populateForm:function(){this.userDetail&&(this.form.profile_pic=this.getprofilePicUrl,this.userDetail.profile_pic&&(this.form.profile_pic=this.userDetail.profile_pic||this.getprofilePicUrl),this.form.username=this.userDetail.username||"",this.form.first_name=this.userDetail.first_name||"",this.form.last_name=this.userDetail.last_name||"",this.form.email=this.userDetail.email||"",this.form.phone_number=this.userDetail.phone_number||"",this.form.gender=this.userDetail.gender||"",this.form.date_of_birth=this.userDetail.date_of_birth||"")},onFileChange:function(e){this.fileObject=e.target.files[0];var t=new FileReader;t.onload=function(e){document.getElementById("preview-image").src=e.target.result},t.readAsDataURL(this.fileObject)},maxInputLength:function(e){return e.length<=this.maxInputLen},minInputLength:function(e){return e.length>=this.minInputLen},validatePassword:function(e){return e.length>=this.passLen},matchPassword:function(e){return e===this.form.password1},validatephoneNo:function(e){return 0==e.length||11===e.length&&"number"===typeof Number(e)},saveUser:function(){var e=this;this.error={},this.sending=!0;var t=new FormData;Object.keys(this.form).forEach((function(s){"profile_pic"==s?t.append(s,e.fileObject):t.append(s,e.form[s])})),this.$store.dispatch("updateUserData",t).then((function(t){e.sending=!1,e.userSaved=!0})).catch((function(t){var s="<div>";if(t.response.data instanceof Object)for(var a in t.response.data)s+=a+": "+t.response.data[a].join("</div><div>");s+="</div>",e.error=t.response.data,e.profileMessage=s,e.sending=!1,e.sending=!1}))},onSubmit:function(){this.formstate.$invalid||this.saveUser()},fieldClassName:function(e){return e?(e.$touched||e.$submitted)&&e.$valid?"has-success":(e.$touched||e.$submitted)&&e.$invalid?"has-danger":void 0:""},openChangePassword:function(){this.$modal.show(f).then((function(){})).catch((function(){}))}},computed:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(n["b"])(["getPageTitle"])),Object(n["b"])(["getprofilePicUrl"])),Object(n["b"])(["userDetail"])),mounted:function(){this.populateForm(),this.$store.commit("setPageData",this.pageData)}},h=p,v=Object(c["a"])(h,a,r,!1,null,null,null);t["default"]=v.exports}}]);
//# sourceMappingURL=profile.8543c295.js.map