(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["groups"],{"53fe":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("md-tabs",{on:{"md-changed":t.changeTab}},[a("md-tab",{attrs:{"md-label":"My groups",id:"mygroup_tab"}},[t.myGroupLoaded?a("div",{staticClass:"md-alignment-top-center md-layout md-size-100"},t._l(t.myGroups,(function(e,s){return a("md-card",{key:s,staticClass:"md-elevation-5 md-layout-item md-xsmall-size-100 md-size-38",attrs:{"md-with-hover":""}},[a("md-card-header",[a("router-link",{staticClass:"group-link",attrs:{to:"/dashboard/test/group/"+e.id}},[a("md-card-header-text",[a("div",{staticClass:"md-title"},[t._v(t._s(e.name))]),a("div",{staticClass:"md-subhead"},[t._v("By: "+t._s(e.author))]),a("div",{staticClass:"md-subhead"},[t._v("Tests: "+t._s(e.total_tests))]),a("div",{staticClass:"md-subhead"},[t._v("Users: "+t._s(e.total_tests))])])],1)],1),a("md-card-actions",[e.is_author?a("md-button",{staticClass:"md-dense",attrs:{to:"/users/group/"+e.id}},[t._v("User")]):t._e(),a("md-button",{staticClass:"md-dense",attrs:{to:"/dashboard/test/group/"+e.id}},[t._v("Test")]),a("md-button",{staticClass:"md-dense",attrs:{to:"/dashboard/results/group/"+e.id}},[t._v("Result")]),e.is_author?a("md-menu",[a("md-button",{staticClass:"md-icon-button",attrs:{"md-menu-trigger":""}},[a("iconify-icon",{staticClass:"iconify vsm--icon",attrs:{icon:"dots-vertical",width:"25",height:"25"}})],1),a("md-menu-content",[a("md-menu-item",[a("a",{staticClass:"cursor",on:{click:function(a){return t.showRenamePrompt(e)}}},[t._v("Rename")])]),a("md-menu-item",[a("a",{staticClass:"cursor",on:{click:function(a){return t.showDeletePrompt(e)}}},[t._v("Delete")])])],1)],1):t._e()],1)],1)})),1):t._e()]),a("md-tab",{attrs:{"md-label":"all groups",id:"allgroup_tab"}},[t.allGroupLoaded?a("div",{staticClass:"md-layout md-size-100"},t._l(t.allGroups,(function(e,s){return a("md-card",{key:s,staticClass:"md-elevation-5 md-layout-item md-size-28 md-small-size-38 md-xsmall-size-100",attrs:{"md-with-hover":""}},[a("md-card-header",[a("router-link",{staticClass:"group-link",attrs:{to:"/dashboard/test/group/"+e.id}},[a("md-card-header-text",[a("div",{staticClass:"md-title"},[t._v(t._s(e.name))]),a("div",{staticClass:"md-subhead"},[t._v("By: "+t._s(e.author))]),a("div",{staticClass:"md-subhead"},[t._v("Tests: "+t._s(e.total_tests))]),a("div",{staticClass:"md-subhead"},[t._v("Users: "+t._s(e.total_tests))])])],1)],1)],1)})),1):t._e()])],1),t.allGroupLoaded&&t.userDetail.is_author?a("md-card",{staticClass:"md-elevation-5  md-size-100"},[a("md-card-header",[a("div",{staticClass:"md-title"},[t._v("Add new group")]),a("div",{attrs:{if:"createMessage"}},[t._v(t._s(t.createMessage))]),a("md-field",[a("label",[t._v("Group name")]),a("md-input",{on:{input:function(e){return t.validateName()}},model:{value:t.createGroup.name,callback:function(e){t.$set(t.createGroup,"name",e)},expression:"createGroup.name"}})],1),a("md-field",{staticClass:"md-size-50"},[a("label",{attrs:{for:"select-group"}},[t._v("Select Access")]),a("md-select",{model:{value:t.createGroup.access,callback:function(e){t.$set(t.createGroup,"access","string"===typeof e?e.trim():e)},expression:"createGroup.access"}},[a("md-option",{attrs:{value:"General"}},[t._v("All Users")]),a("md-option",{attrs:{value:"Members"}},[t._v("Members Only")])],1)],1),a("md-button",{staticClass:"md-list-action md-raised md-primary md-dense",attrs:{disabled:t.disableCreate},on:{click:function(e){return t.createNewGroup()}}},[t._v("Create")])],1)],1):t._e(),a("md-card",{staticClass:"md-elevation-5  md-size-100"},[a("md-card-header",[a("div",{staticClass:"md-title"},[t._v("Join group")]),a("div",{attrs:{if:"joinMessage"}},[t._v(t._s(t.joinMessage))]),a("label",{attrs:{for:"select_group"}},[t._v("Select Group")]),a("select",{directives:[{name:"model",rawName:"v-model.lazy",value:t.joinGroup.group,expression:"joinGroup.group",modifiers:{lazy:!0}}],staticStyle:{width:"100%",padding:"1em"},attrs:{name:"select_group",id:"select_group_id"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.joinGroup,"group",e.target.multiple?a:a[0])},function(e){return t.checkAccess()}]}},t._l(t.allGroups,(function(e,s){return a("option",{key:s,domProps:{value:e.id}},[t._v(t._s(e.name))])})),0),t.groupAccess&&t.groupAccess.requires_access_key?a("div",[a("div",{staticClass:"md-subheading"},[t._v("Enter "+t._s(t.groupAccess.name)+" access Key")]),a("md-field",[a("label",{attrs:{for:"access key"}},[t._v("access key")]),a("md-input",{attrs:{autocomplete:"new-password","md-dense":"",disabled:t.disableJoin,type:"password"},model:{value:t.joinGroup.access_key,callback:function(e){t.$set(t.joinGroup,"access_key",e)},expression:"joinGroup.access_key"}})],1)],1):t._e(),a("md-button",{staticClass:"md-raised md-primary md-dense",attrs:{disabled:t.disableJoin},on:{click:function(e){return t.joinNewGroup()}}},[t._v("Join")])],1)],1)],1)},o=[],i=(a("4160"),a("b0c0"),a("159b"),a("5530")),n=a("2f62"),r=a("aacb"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("md-modal-dialog",{attrs:{"md-click-outside-to-close":!1,"md-fullscreen":!1},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.group;return[a("md-toolbar",{staticClass:"md-accent"},[a("span",{staticClass:"md-title"},[t._v("Rename")])]),a("md-dialog-content",[a("md-field",[a("label",{},[t._v("Test Title:")]),a("md-input",{staticClass:" ",model:{value:s.name,callback:function(e){t.$set(s,"name",e)},expression:"group.name"}})],1)],1),a("md-dialog-actions",[a("md-button",{staticClass:"md-accent md-raised md-dense",on:{click:function(e){return t.$modal.submit(s)}}},[t._v("Ok")]),a("md-button",{staticClass:"md-accent md-raised md-dense",on:{click:function(e){return t.$modal.cancel()}}},[t._v("Cancel")])],1)]}}])})],1)},c=[],l={name:"renameDialog",data:function(){return{showLoading:!1,status:"loading ..."}},methods:{}},u=l,m=a("2877"),p=Object(m["a"])(u,d,c,!1,null,null,null),h=p.exports,g={data:function(){return{pageData:{pageTitle:"Groups"},groupId:"",createGroup:{name:"",access:"Members"},createMessage:"",allGroupLoaded:!1,myGroupLoaded:!1,disableCreate:!1,disableJoin:!1,joinMessage:"",joinGroup:{group:"",access_key:""},myGroups:[],allGroups:[],groupAccess:null}},methods:{showDeletePrompt:function(t){var e=this;this.$modal.show(r["a"],{prompt:"Are you sure you want to delete group?"}).then((function(){e.$modal.cancel(),e.deleteGroup(t)})).catch((function(){}))},showRenamePrompt:function(t){var e=this;this.$modal.show(h,{group:t}).then((function(t){e.$modal.cancel(),e.renameGroup(t)})).catch((function(){}))},deleteGroup:function(t){var e=this;this.$http({url:"testapi/1/mygroup/"+t.id+"/",method:"DELETE"}).then((function(t){e.loadingMessage="Group deleted successfully",e.showLoading=!0,e.loadGroups()})).catch((function(t){e.loadingMessage="Failed to delete group",e.showLoading=!0}))},renameGroup:function(t){var e=this;this.$http({url:"testapi/1/mygroup/"+t.id+"/",data:t,method:"PUT"}).then((function(t){e.loadingMessage="Group renamed successfully",e.showLoading=!0,e.loadGroups()})).catch((function(t){e.loadingMessage="Failed to rename group",e.showLoading=!0}))},checkAccess:function(){var t=this;this.joinMessage="",this.$http({url:"testapi/1/group_access/"+this.joinGroup.group+"/",method:"GET"}).then((function(e){t.groupAccess=e.data})).catch((function(e){t.joinMessage=e.response.data.error}))},joinNewGroup:function(){var t=this;this.joinMessage="",this.disableJoin=!0,this.$http({url:"testapi/1/group_admission/"+this.joinGroup.group+"/",data:this.joinGroup,method:"POST"}).then((function(e){t.loadGroups(),t.disableJoin=!1})).catch((function(e){t.joinMessage=e.response.data.error,t.disableJoin=!1}))},getMyGroup:function(){var t=this;this.$http({url:"testapi/1/mygroup/",method:"GET"}).then((function(e){t.myGroups=e.data,t.myGroupLoaded=!0})).catch((function(t){}))},loadGroups:function(){this.getMyGroup(),this.getAllGroup()},createNewGroup:function(){var t=this,e=this.createGroup;this.$http({url:"testapi/1/mygroup/",data:e,method:"POST"}).then((function(e){t.groupId=e.data.id,t.loadGroups()})).catch((function(t){}))},getAllGroup:function(){var t=this;this.$http({url:"testapi/1/allgroup/",method:"GET"}).then((function(e){t.allGroups=e.data,t.allGroupLoaded=!0})).catch((function(t){}))},validateName:function(){var t=this;this.createMessage="",this.disableCreate=!this.createGroup.name,this.allGroups.forEach((function(e){e.name==t.createGroup.name&&(t.disableCreate=!0,t.createMessage="group name '"+t.createGroup.name+"' already exists. Please use another name.")}))}},computed:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(n["b"])(["getPageTitle"])),Object(n["b"])(["userDetail"])),Object(n["b"])(["pageTitle"])),mounted:function(){this.$store.commit("setPageData",this.pageData),this.loadGroups()}},v=g,f=Object(m["a"])(v,s,o,!1,null,null,null);e["default"]=f.exports},aacb:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("md-modal-dialog",{attrs:{"md-click-outside-to-close":!1,"md-fullscreen":!1},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.prompt;return[a("md-toolbar",{staticClass:"md-accent"},[a("span",{staticClass:"md-title"},[t._v("Delete")])]),a("md-dialog-content",[a("div",{staticClass:"md-title"},[t._v(t._s(s))])]),a("md-dialog-actions",[a("md-button",{staticClass:"md-accent md-raised md-dense",on:{click:function(e){return t.$modal.submit()}}},[t._v("Delete")]),a("md-button",{staticClass:"md-accent md-raised md-dense",on:{click:function(e){return t.$modal.cancel()}}},[t._v("Cancel")])],1)]}}])})],1)},o=[],i={name:"deleteDialog",data:function(){return{showLoading:!1,status:"loading ..."}},methods:{}},n=i,r=a("2877"),d=Object(r["a"])(n,s,o,!1,null,null,null);e["a"]=d.exports},b0c0:function(t,e,a){var s=a("83ab"),o=a("9bf2").f,i=Function.prototype,n=i.toString,r=/^\s*function ([^ (]*)/,d="name";s&&!(d in i)&&o(i,d,{configurable:!0,get:function(){try{return n.call(this).match(r)[1]}catch(t){return""}}})}}]);
//# sourceMappingURL=groups.2abc4d0f.js.map