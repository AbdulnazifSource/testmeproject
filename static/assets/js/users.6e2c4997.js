(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["users"],{"4c7a":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("md-snackbar",{attrs:{"md-active":e.showLoading},on:{"update:mdActive":function(t){e.showLoading=t},"update:md-active":function(t){e.showLoading=t}}},[e._v(" "+e._s(e.loadingMessage)+" ")]),s("md-card",{staticClass:"md-elevation-5"},[s("md-card-header",[s("md-toolbar",{staticClass:"md-primary"},[s("div",{staticClass:"md-title"},[e._v("Group Users")])])],1),s("md-card-content",[s("div",{directives:[{name:"show",rawName:"v-show",value:e.listUserView,expression:"listUserView"}]},[s("md-button",{staticClass:"md-raised md-dense md-primary",on:{click:e.selectionToggle}},[e._v(e._s(e.selectState))]),e.selectable?s("md-button",{staticClass:"md-raised md-dense md-primary",on:{click:e.selectAllRows}},[e._v("select all")]):e._e(),e.selectable?s("md-button",{staticClass:"md-raised md-dense md-primary",on:{click:e.deselectAllRows}},[e._v("deselect all")]):e._e(),e.selectable?s("md-button",{staticClass:"md-raised md-dense md-primary",on:{click:e.deleteSelectedRows}},[e._v(" delete ("+e._s(e.userTable?e.userTable.getSelectedData().length:"0")+")")]):e._e(),e.selectable?s("md-button",{staticClass:"md-dense"},[e._v(" selected ("+e._s(e.userTable?e.userTable.getSelectedData().length:"0")+")")]):e._e(),s("div",{attrs:{id:"user-table"}})],1)]),s("md-card-actions",[s("md-button",{staticClass:"md-raised md-accent",attrs:{to:"/users/group/"+e.group_id+"/add_user"}},[e._v("Add User")])],1)],1)],1)},l=[],i=(s("d3b7"),s("5530")),o=s("2f62"),r=function(){return s.e("tabulator").then(s.bind(null,"e325"))},n={data:function(){return{pageData:{pageTitle:"Users",showAppDrawer:!1},Tabulator:null,myUsers:null,userTable:null,listUserView:!1,selectable:!1,selectState:"select"}},props:["group_id"],methods:{getMyGroupUser:function(){var e=this;this.$http({url:"testapi/1/mygroup/"+this.group_id+"/user/",method:"GET"}).then((function(t){e.myUsers=t.data,e.setupTabulator(),e.listUserView=!0})).catch((function(t){e.loadingMessage="No group user found",e.showLoading=!0}))},removeGroupUser:function(e){var t=this,s=e.getData();this.loadingMessage="Removing group user...",this.showLoading=!0,this.$http({url:"testapi/1/mygroup/"+this.group_id+"/user/"+s.id+"/",method:"DELETE"}).then((function(s){e.delete(),t.loadingMessage="Group user removed",t.showLoading=!0})).catch((function(e){t.loadingMessage="Failed to remove group",t.showLoading=!0}))},selectionToggle:function(){this.selectable?(this.selectable=!1,this.userTable.deselectRow(),this.userTable.hideColumn("rowSelection"),this.selectState="select"):(this.selectable=!0,this.userTable.showColumn("rowSelection"),this.selectState="cancel")},selectAllRows:function(){this.userTable.selectRow()},deselectAllRows:function(){this.userTable.deselectRow()},deleteSelectedRows:function(){var e=this.userTable.getSelectedRows();if(e)for(var t=0;t<e.length;t++)this.removeGroupUser(e[t])},setupTabulator:function(){this.Tabulator&&null===this.userTable&&(this.userTable=new this.Tabulator("#user-table",{data:this.myUsers,reactiveData:!0,layout:"fitColumns",selectableRollingSelection:!1,selectablePersistence:!1,addRowPos:"bottom",pagination:"local",paginationSize:10,paginationSizeSelector:[10,20,50,100],paginationAddRow:"table",rowClick:function(e,t){t.toggleSelect()}.bind(this),selectableCheck:function(){return this.selectable}.bind(this),columns:[{field:"rowSelection",formatter:"rowSelection",visible:!1,titleFormatter:"rowSelection",hozAlign:"center",headerSort:!1},{field:"SNo.",formatter:"rownum",title:"SNo."},{title:"Username",field:"username"},{title:"First name",field:"first_name"},{title:"Last name",field:"last_name"},{title:"Gender",field:"profile_user.gender"},{title:"Email",field:"email"}]}))}},computed:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(o["b"])(["getPageTitle"])),Object(o["b"])(["userDetail"])),Object(o["b"])(["pageTitle"])),mounted:function(){var e=this;r().then((function(t){var s=t.default;e.Tabulator=s,e.getMyGroupUser()})),this.$store.commit("setPageData",this.pageData)}},d=n,c=s("2877"),u=Object(c["a"])(d,a,l,!1,null,null,null);t["default"]=u.exports}}]);
//# sourceMappingURL=users.6e2c4997.js.map